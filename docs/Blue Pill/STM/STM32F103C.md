# **Fast guide STM32F103C*
This Aixt implementation that supports the card  Blue Pill STM32F103C

# **ID card STM32F103C**

## View
* *STM32F103C, a total of 44 interfaces are connected, for example, the pin function definition table is the interface definition.*

![Alt text](Picture/BLUE_PILL_STM32F103C.jpg)
*Image taken from the device datasheet*

## Datasheet
[STM32F103C]()

## Port Identification
Below are the ports used and their proper designations for programming:

No.| Name     | Function 
-- |-----     |---
1  |VBAT      |3.3V power supply; The output current of the external power supply
2  |          | By default, it is enabled as a chip, and the high level is effective 
3  |          | Empty feet 
4  |          | GPIO11/SPI_SCLK/IIC_SDA/ADC_CH10/JTAG_TDI/TDO 
7  |R         | NRST_RESET BUTTON
10 |A0        | PA0_ADC0_CTS2_T2C1E_WKUP
11 |A1        | PA1_ADC1_RTS2_T2C2
12 |A2        | PA2_ADC2_TX2_T2C3
13 |A3        | PA3_ADC3_RX2_T2C4
14 |A4        | PA4_ADC4_NSS1_CK2
15 |A5        | PA5_ADC5_SCK1 
16 |A6        | PA6_ADC6_MISO1_T3C1_T1BKIN 
17 |A7        | PA7_ADC7_MOSI1_T3C2_T1C1N  
18 |B0        | PB0_ADC8_T3C3_T1C2N
19 |B1        | PB1_ADC9_T3C4_T1C3N
20 |BOOT1     | PB2_BOOT1
21 |B10       | PB10_SCL2_TX3_T2C3N
22 |B11       | PB11_SDA2_RX3_T2C4N
25 |B12       | PB12_SMBAI2_NSS2_T1BKIN_CK3
26 |B13       | PB13_SCK2_T1C1N_CTS3
27 |B14       | PB14_MISO2_T1C2N_RTS3
28 |B15       | PB15_MOSI2_T1C3N
29 |A8        | PA8_CK1_T1C1_MCO
30 |A9        | PA9_TX1_T1C2
31 |A10       | PA10_RX1_T1C3
32 |A11       | PA11_USB-_CTS1_T1C4_CANRX
33 |A12       | PA12_USB+_RTS1_T1ETR_CANTX 
34 |SWIO      | SWIO_JTMS_PA13 
37 |SWCLK     | SWCLK_JTCK_PA14
38 |A15       | PA15_JTDI_NSS1_T2C1E
39 |B3        | PB3_JTDO_SCK1_T2C2_TRACE SWO
40 |B4        | PB4_JTRST_MISO1_T3C1
41 |B5        | PB5_SMBAI1_MOSI1_T2C2
42 |B6        | PB6_SCL1_T4C1_TX1
43 |B7        | PB7_SDA1_T4C2_RX1
44 |BOOT0     | BOOT0
45 |B8        | PB8_SCL1_T4C3_CANRX
46 |B9        | PB9_SDA1_T4C4_CANTX
   |5V        | INPUT 5V BLUE PILL STM23F103C
   |GND       | GROUND CARD BLUE PILL STM23F103C
   |3.3V      | INPUT 3.3V BLUE PILL STM23F103C

## Programming in v language
For each of these modules, you will have a file in .c.v format with the same name of the module and in this you will have the text module followed by the name of the module, example:
* module pin
* module adc
* module pwm


### Output port configuration
To activate the port to use
```go
pin__setup(PIN_NAME, MODE)
```
To activate the port to use
```go
pin__high(PIN_NAME)
```
* *Example: If you want to activate the port 17;  `pin__high(17)`.*

To disable the port being used
```go
pin__low(PIN_NAME)
```
* *Example: If you want to disable the port 17;  `pin__low(17)`.*

To disable or enable the port to be used

```go
pin__write(PIN_NAME, VALUE)
```
* *Example: If you want to disable port 17 `pin__write(17, 1)`, and if you want to activate  `pin__write(17, 0)`.*

### Input port detection

If you need to know what state an entry port is in:
```go
x = pin__read(PIN_NAME)
```

* *Example: If you want to detect the VALUE of port 3; `x = pin__read(17)`, and `x` will take the VALUE of 0 or 1, depending on which port is active or disabled.*

### Analog to digital ports (ADC)

To configure one of the analog ports
```go
adc__setup(PIN_NAME, SETUP_VALUE, ... )
```
* *In PIN_NAME the name of the analog port is entered, in SETUP_VALUE the VALUE that will be given is said port.*

To detect the analog port VALUE
```go
x = adc__read(PIN_NAME)
```
* *In `PIN_NAME` the name of the analog port is entered, and `x` takes the VALUE of said port..*

## Pulse Width Modulation (PWM outputs)

To configure some PWM
```go
pwm__setup(SETUP_VALUE, setup_VALUE_1, ... )
```
* *In pwm you set the PWM to use, and in SETUP_VALUE the VALUE to which you want to configure said pwm.*


To configure the duty cycle of a modulator
```go
pwm__duty(duty)
```
* *In PWM the pwm to be used is set, and in `duty` the VALUE of the cycle (from 0 to 100) in percentage.*

## Serial communication (UART)

The UART used to be the standard stream output, so the functions `print()`, `println()` and `input()` work directly on the default UART. The default UART could change depending on the board or microcontroller, please refer to the specific documentation. The syntax for most of UART functions is: `uart_function_name_x()`, being `x` the identifying number in case of multiple UARTs. You can omit the `x` for referring to the first or default UART, or in the case of having only one.  

### UART setup

```v
uart__setup(BAUD_RATE)   // the same of uart__setup(BAUD_RATE)
```
For a second connection it is used as:
```v 
uart__setup_1(BAUD_RATE)   // the same of uart__setup_1(BAUD_RATE)
```
- `BAUD_RATE` configure the communication speed
### Serial transmitting

```v
uart__print(MESSAGE)      // print a string to the default UART
```
```v
uart__println(MESSAGE)    // print a string plus a line-new character to the default UART
```
```v
uart__ready // get everything ready for to UART
```
```v
uart__read // receives binary data (in Bytes) to UART
```
```v
uart__write(MESSAGE)    // send binary data (in Bytes) to second UART
```
- For a second UART, it would be used as follows:
```v
uart__print_1(MESSAGE)    // print a string to the second UART
```
```v
uart__println_1(MESSAGE)  // print a string plus a line-new character to the second UART
```
```v
uart__write_1(MESSAGE)    // send binary data (in Bytes) to second UART
```
```v
uart__ready_1 // get everything ready for to second UART
```
```v
uart__read_1 // receives binary data (in Bytes) to second UART
```

### Retardos

* Use of times

    * In each expression, the time VALUE is put inside the parentheses.
```go
time__sleep(S) //Seconds
```
```go
time__sleep_ms(MS) //Milliseconds
```
```go
time__sleep_us(US) //Microseconds
```

* Example flashing LED

```go
import pin
import time {sleep_ms}

pin.setup(14, pin.out)

for {   //infinite loop
    pin.high(14)
    sleep_ms(500)
    pin.low(14)
    sleep_ms(500)
}
```