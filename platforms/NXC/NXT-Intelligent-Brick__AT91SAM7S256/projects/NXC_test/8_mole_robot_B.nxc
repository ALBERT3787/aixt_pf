// Aixt project (NXC generated code)
// Device = Atmel AT91SAM7S256
// Board = LEGO Mindstorms NXT intelligent brick

const int t_move = 500;
const int t_stop = 500;
const int t_avoid = 1500;
const int pow = 50;

void straight(long power, long time) {
	OnFwd(OUT_A, power);
	OnRev(OUT_B, power);
	Wait(time);
}
void spin(long power, long time) {
	OnFwd(OUT_A, power);
	OnFwd(OUT_B, power);
	Wait(time);
}
void _stop(long time) {
	Off(OUT_AB);
	Wait(time);
}
task main() {
	SetSensorTouch(IN_3);
	while(true) {
		straight(pow, t_move);
		if(Sensor(S3)==1) {
			_stop(t_stop);
			straight(-pow, t_avoid);
			spin(pow, t_avoid);
		}
	}
}